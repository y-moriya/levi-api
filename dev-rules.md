# 開発ルール

このドキュメントは、Levi API
プロジェクトの開発ルールを定めています。すべての開発作業においてこれらのルールに従ってください。

## コミュニケーションルール

- あなたとの対話やソースコードのコメントは基本的に日本語でおこなうものとする
- テストケース、ログ出力も日本語にする

## コード品質管理ルール

### 1. TypeScriptの型チェック

- ファイルの編集後は必ずTypeScriptの型エラーがないかを確認する
- 型エラーを含む場合、必ずそれを修正してから次の作業を開始する
- `deno check` または適切なエディタ拡張機能を使用して型チェックを行う

```bash
# すべてのTypeScriptファイルの型チェック
deno check **/*.ts
```

### 2. テスト駆動開発

- テストの実装は bdd ではなく `Deno.test` を用いる
- テストに失敗した場合、実際の挙動に合わせてテストを修正する前に、どのような仕様が正しいかを深く考える
- テストコードと実装コードのどちらが正しい仕様を表現しているかを判断する
- 仕様が不明確な場合は、プロジェクト要件に立ち返り、正しい実装を決定する

```bash
# テストの実行
deno test -A
```

### 3. コードレビュープロセス

- コードの変更は、上記のルールに準拠していることを確認した後にレビューに提出する
- コードレビューでは、機能の正しさ、パフォーマンス、可読性を評価する
- レビュー指摘事項は、必ず次の作業前に対応する

## エラーハンドリングのベストプラクティス

- すべての例外は適切に捕捉し、ユーザーフレンドリーなエラーメッセージを提供する
- エラーコードとHTTPステータスコードは一貫性を保つ
- デバッグ情報は本番環境では非表示にする

## パフォーマンスと最適化

- 不必要な計算やデータベースアクセスを避ける
- 大きなデータセットを扱う際はページネーションを適用する
- メモリリークを防ぐために適切なリソース管理を行う

## セキュリティ考慮事項

- 認証情報は適切に保護する
- 入力データは常にバリデーションを行う
- JWTトークンの有効期限を適切に設定する

---

このルールは、プロジェクトの進行に合わせて必要に応じて更新されます。
